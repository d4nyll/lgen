<template name="SendMessage">


  {{#if callFromClassPanel}}
   
  {{else}}
    {{#contentFor "headerTitle"}}
      <h1 class="title">{{_ "NewNotification"}}</h1>
    {{/contentFor}}
  
  
  
  
    {{#contentFor "headerButtonLeft"}}
      {{>ionNavBackButton href="/Classes" }}
    {{/contentFor}}
  
  
  
    {{#contentFor "headerButtonRight"}}
      <div style="position: absolute; right: 0;">
        
        <button class="button button-icon icon ion-paper-airplane stable sendMsgBtn"></button>
  
      </div>
    {{/contentFor}}
  {{/if}}


  {{#if callFromClassPanel}}
      <div class="list">
   
        <div class="padding preview" style='display:none'>
          {{#each uploadPic}} {{#with FS.GetFile "images" this}}
          <!-- In here, we can use the FS.File instance methods that work as helpers, such as {{url}} or {{isImage}} -->
          {{#unless this.isUploaded}} {{> LoadingSpinner}} {{else}}
          <div class="bubble">
            <img style='height:100px;' src="{{this.url store='thumbs'  }}" alt="" class="imgThumbs" data-fullsizeimage="{{this.url  }}">
            <a class="button button-icon icon ion-close-circled image" data-imgid="{{_id}}"></a>
            
          </div>
          {{/unless}} {{/with}} {{/each}} {{#each uploadSound}} {{#with FS.GetFile "sounds" this}}
          <!-- In here, we can use the FS.File instance methods that work as helpers, such as {{url}} or {{isImage}} -->
          {{#unless this.isUploaded}} {{> LoadingSpinner}} {{else}} {{#if url}}
          <div class="bubble">
            <!-- <img src="{{this.url store='thumbs'  }}" alt="" class="imgThumbs" data-fullsizeimage="{{this.url  }}" >
                      <a class="button button-icon icon ion-close-circled image" data-imgid="{{_id}}"></a> -->
            <a class="button button-icon icon ion-play playBtn" data-clipid="{{_id}}" data-clipurl="{{url}}"></a>
            <a class="button button-icon icon ion-close-circled voice" data-clipid="{{_id}}"></a>
          </div>
          {{/if}} {{/unless}} {{/with}} {{/each}}
      
        </div>
              
        <div style="display:none;"> {{ arrToString searchObj.selectArrName }}</div>
        <div class="item item-input input-box-panel  {{messageBox}}" style="">
          <div class="row no-padding">
          <div class="col  less-padding">
            <textarea  dir="auto" name="msg" maxlength="5000" class="inputBox msgBox autogrow-short" placeholder=""></textarea>
          </div>
            <div class="col col-10 less-padding image-btn-class">
              <div class="file ">
                <i class="icon ion-ios-camera-outline imageIcon {{ isDisabled 'camera' }} "></i>
                <input type="file" id="imageBtn" accept="image/*;capture=camera" capture="camera" {{ isDisabled 'camera' }}>
              </div>
            </div>
            <div class="col col-10 less-padding voice-btn-class">
              <div class="file voice {{ isDisabled 'voice' }} ">
                <i class="icon  ion-ios-mic-outline {{ isDisabled 'voice' }} "></i>
              </div>
            </div>
            <div class="col col-10 less-padding send-msg-btn-class" style='margin-right:6%;'>
                <div class="file">
                  <i class="icon ion-paper-airplane sendMsgBtn"></i>                    
                </div>
                  
          
            </div>            
          </div>          
        </div>
   

      
      </div>
  {{else}}
    {{#ionContent}}
    
     <div class="list">
      
         <div class="padding preview" style="display:none;">
          {{#each uploadPic}} {{#with FS.GetFile "images" this}}
          <!-- In here, we can use the FS.File instance methods that work as helpers, such as {{url}} or {{isImage}} -->
          {{#unless this.isUploaded}} {{> LoadingSpinner}} {{else}}
          <div class="bubble">
            <img src="{{this.url store='thumbs'  }}" alt="" class="imgThumbs" data-fullsizeimage="{{this.url  }}">
            <a class="button button-icon icon ion-close-circled image" data-imgid="{{_id}}"></a>
          </div>
          {{/unless}} {{/with}} {{/each}} {{#each uploadSound}} {{#with FS.GetFile "sounds" this}}
          <!-- In here, we can use the FS.File instance methods that work as helpers, such as {{url}} or {{isImage}} -->
          {{#unless this.isUploaded}} {{> LoadingSpinner}} {{else}} {{#if url}}
          <div class="bubble">
            <!-- <img src="{{this.url store='thumbs'  }}" alt="" class="imgThumbs" data-fullsizeimage="{{this.url  }}" >
                      <a class="button button-icon icon ion-close-circled image" data-imgid="{{_id}}"></a> -->
            <a class="button button-icon icon ion-play playBtn" data-clipid="{{_id}}" data-clipurl="{{url}}"></a>
            <a class="button button-icon icon ion-close-circled voice" data-clipid="{{_id}}"></a>
          </div>
          {{/if}} {{/unless}} {{/with}} {{/each}}
      
        </div>
             
        <a href="{{pathFor 'MessageClassSelection' }}">
          <div class="item">
            {{_ "To" }} {{ arrToString searchObj.selectArrName }}
          </div>
        </a>
      
        <label class="item item-input {{messageBox}}" style="height:40vh">
          <textarea class="msgBox" placeholder="{{_'message'}}" style="height:100%;font-size:20px;"></textarea>
        </label>
      
        <div class="">
          <div class="row">
            <div class="col col-10">
              <div class="file ">
                <i class="icon ion-image imageIcon {{ isDisabled 'camera' }} "></i>
                <input type="file" id="imageBtn" accept="image/*;capture=camera" capture="camera" {{ isDisabled 'camera' }}>
              </div>
            </div>
            <div class="col col-10">
              <div class="file voice {{ isDisabled 'voice' }} ">
                <i class="icon  ion-mic-a {{ isDisabled 'voice' }} "></i>
              </div>
            </div>
          </div>
        </div>

      
      </div>      
       
       
             
    {{/ionContent}}
  {{/if}}










</template>
