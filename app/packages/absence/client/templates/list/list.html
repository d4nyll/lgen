<template name="AttendanceList">
  {{#contentFor "headerTitle"}}
     <h1 class="title">{{_ "absence.Application" }}</h1>
  {{/contentFor}}


  {{#contentFor "headerButtonLeft"}}
    {{>ionNavBackButton text=" "}}
  {{/contentFor}}


  {{#contentFor "headerButtonRight"}}
    <!--<div style="position: absolute; right: 0 ; width:12.5%; ">
      <a href="{{ pathFor 'newsgroups.list'}}" class="button button-clear button-entering button-active">
        <i class="icon ion-funnel"></i>
      </a>
    </div>-->

  {{/contentFor}}
  
  {{#ionView}}
    {{#ionContent}}
          
                  
        {{#if Template.subscriptionsReady}}
         {{#with getAttendanceRecord}}
            {{#each this}}
                <div class="card less-top-bottom-padding ">

                    <!--<div class="item item-text-wrap  less-top-bottom-padding">-->
                        <!--<h2>{{_ "absence.Reference" }}</h2>-->
                        <!--<p>{{_id}}</p>-->
                    <!--</div>-->
                    <div class="item item-text-wrap  less-top-bottom-padding">
                        <h2>{{_ "absence.Student" }}</h2>
                        <p>{{#with getUserById studentId}} {{profile.firstName}} {{profile.lastName}}  {{/with}}</p>                 

                    </div>
                    <div class="item item-text-wrap  less-top-bottom-padding">
                        <h2>{{_ "absence.Apply" }}</h2>
                        <p>{{#with getUserById reporterId}} {{profile.firstName}} {{profile.lastName}}  {{/with}}</p>                   

                    </div>
                    <div class="item item-text-wrap  less-top-bottom-padding">
                        <h2>{{_ "absence.From" }}</h2>
                        <p>{{formatDateTimeCalendarFromUnixTime dateFrom}}</p>

                    </div>
                    <div class="item item-text-wrap  less-top-bottom-padding">
                        <h2>{{_ "absence.To" }}</h2>
                        <p>{{formatDateTimeCalendarFromUnixTime dateTo}}</p>

                    </div>
                    <div class="item item-text-wrap  less-top-bottom-padding">
                        <h2>{{_ "absence.ReasonToLeave" }}</h2>
                        <p>{{message}}</p>

                    </div>                
                    <div class="item item-text-wrap  less-top-bottom-padding">
                        <h2>{{_ "absence.Approve" }}</h2>
                        <p>
                            {{#if approved}}
                                {{_ "absence.Yes" }}
                            {{else}}
                                {{_ "absence.No" }}
                            {{/if}}
                        </p>                                                                              
                        <p>{{#if recentlyApproved}}
                                {{#with recentlyApproved}}
                                  {{_ "absence.SchoolHasApprovedApplication" }} {{messageCreateTimestamp}}
                                {{/with}}
                            {{/if}}
                        </p>
                    </div>

                </div>
            {{else}}
                <a class="item" href="#">
                    {{_ "absence.Noapplication" }}
                </a>         
            {{/each}}
         {{/with}}      
        {{else}}
          <div style ="padding-top:2vh; height: 5vh;" class="spinner-loading">{{> ionSpinner icon="spiral"}}</div>
        {{/if}}
    {{/ionContent}}
  {{/ionView}}
</template>
