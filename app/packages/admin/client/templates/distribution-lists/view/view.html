<template name="AdminDistributionListView">
    {{#if Template.subscriptionsReady}}
    <div class="panel panel-flat">
        {{#with listData}}
        <div class="panel-heading">
            <h1>{{name}}</h1>
        </div>

        <div class="panel-body">
            <!--<p>{{_ "Admin.ListCode" }}: {{url}}</p>-->

            <h3>{{_ "Admin.Users" }}</h3>
            <div id="AdminClassesView__add-user-container" class="form-group">
                <div class="col-xs-12">
                    <div class="add-user-input-container input-group AdminDistributionListView__add-user-input-container">
                        {{> EasySearch.Input index=distributionListUsersIndex attributes=adminUserSearchInputAttributes timeout=100}}
                        <span>{{totalSelectUserCount}} have been selected.</span>
                        <br/>
                        Filter:
                                <label class="radio-inline">   <input type="radio" class='filter-by-role' name="filter-by-role" id="filter-by-role-all" value="all"> All  </label>
                                <label class="radio-inline">   <input type="radio" class='filter-by-role' name="filter-by-role" id="filter-by-role-parent" value="parent"> Parent  </label>
                                <label class="radio-inline">   <input type="radio" class='filter-by-role' name="filter-by-role" id="filter-by-role-student" value="student"> Student  </label>
                                <label class="radio-inline">   <input type="radio" class='filter-by-role' name="filter-by-role" id="filter-by-role-teacher" value="teacher"> Teacher  </label>
                                <label class="radio-inline">   <input type="radio" class='filter-by-role' name="filter-by-role" id="filter-by-role-admin" value="admin"> Admin  </label>
                                                                                                                                                                                       
                           
                        <br/>
                        <button class='btn btn-default select-all-users-btn'>Select All</button> 
                        <button class='btn btn-default deselect-all-users-btn'>De-Select All</button>                                   
                        <button class='btn btn-default select-all-users-current-page-btn'>Select All From Current Page</button>
                        <button class='btn btn-default deselect-all-users-current-page-btn'>De-Select All From Current Page</button>                
                        {{#if showOptions}}
                            <br/>
                            <button class='btn btn-success add-users-to-distribution-list'>Add User(s) to Distribution List</button>
                            <button class='btn btn-danger remove-users-from-distribution-list'>Remove User(s) from Distribution List</button>                                                                               
                        {{/if}}                    
                    </div>
                    <div class="table-responsive" style='height:300px;'>                
                    <table class='table table-condensed' >
                        <thead align="left">
                        <tr>
                            <th>&nbsp;</th>
                            <th>Add</th>
                            <th>Role</th>
                            <th>Last Name</th>
                            <th>First Name</th>
                            <th>Email</th>                        
                            <th>User Name</th>
                            <th>Grade</th>
                            
                        </tr>
                        </thead>
                        {{#EasySearch.Each index=distributionListUsersIndex }}
                        <tr>
                            <td><input {{isUserChecked _id}} type="checkbox" name="user" class='school-directory-user-checkbox' value="{{_id}}"/></td>
                            <td><button class="AdminDistributionListView__user-search-result" data-user-id="{{_id}}">Add</button></td>
                            <td>{{getUserRoles}}</td>
                            <td><a href="{{pathFor 'admin.users.view' school=getCurrentSchoolName uid=getUserId}}">{{profile.lastName}}</a></td>
                            <td><a href="{{pathFor 'admin.users.view' school=getCurrentSchoolName uid=getUserId}}">{{profile.firstName}}</a></td>
                            <td>{{getUserEmail}}</td> 
                            <td><a href="{{pathFor 'admin.users.view' school=getCurrentSchoolName uid=getUserId}}"> {{username}} </a></td>
                            <td>{{grade}}</td> 
                        </tr>                         
                           <!-- <li class="AdminDistributionListView__user-search-result" data-user-id="{{_id}}">{{profile.firstName}} {{profile.lastName}}</li>-->
                        {{/EasySearch.Each}}
                        
                        {{#EasySearch.IfNoResults index=distributionListUsersIndex}}
                            <div>No results found!</div>
                        {{/EasySearch.IfNoResults}}                            
                    </table>
                    </div>
                {{> EasySearch.Pagination index=distributionListUsersIndex maxPages=10 customRenderPagination='CustomEasySearchPagination'}}               
                    
                </div>
            </div>
            <!-- Large table -->
            <table class="table datatable-basic">
                <thead>
                    <th>{{_ "Admin.FirstName" }}</th>
                    <th>{{_ "Admin.LastName" }}</th>
                    <th>{{_ "Admin.RemoveUser" }}</th>
                </thead>
                <tbody>
                    {{#each users}} {{#with userData this}}
                    <tr>
                        <td><a href="{{pathFor 'admin.users.view' data=_id}}">{{profile.firstName}}</a></td>
                        <td><a href="{{pathFor 'admin.users.view' data=_id}}">{{profile.lastName}}</a></td>
                        <td>
                            <button type="button" data-user-id="{{_id}}" class="AdminDistributionListView__remove-user btn border-warning text-warning-600 btn-flat btn-icon btn-rounded"><i class="icon-minus2"></i></button>
                        </td>
                    </tr>
                    {{/with}}
                    {{else}}
                        <tr><td> No User in distribution list yet.</td> </tr>
                    {{/each}}
                </tbody>
            </table>
            <!-- /large table -->
        </div>
        {{/with}}
    </div>
    {{/if}}
</template>