<template name="AdminUsersSearch">
    <div class="panel panel-flat">
        <div class="panel-heading">
            <h1>Search Users</h1>
        </div>
        
        {{#if Template.subscriptionsReady}}
            <div class="panel-body">
                
                {{> EasySearch.Input index=usersIndex attributes=userSearchInputAttributes}}
                <span>Total User: {{totalUserCount}} </span>
                <span>{{totalSelectUserCount}} has been chosen.</span>
                <br/>
                <button class='btn btn-default select-all-users-btn'>Select All</button> 
                <button class='btn btn-default deselect-all-users-btn'>De-Select All</button>                                   
                <button class='btn btn-default select-all-users-current-page-btn'>Select All From Current Page</button>
                <button class='btn btn-default deselect-all-users-current-page-btn'>De-Select All From Current Page</button>                
                {{#if showOptions}}
                    <br/>
                    <button class='btn btn-danger remove-users-btn'>Remove User(s)</button>                 
                    <button class='btn btn-success add-users-to-role'>Add User(s) to Role</button>
                    <button class='btn btn-danger remove-users-from-role'>Remove User(s) from Role</button>
                    <select id='selected-role' class="form-control">
                        <option value="parent">Parent</option>
                        <option value="student">Student</option>
                        <option value="teacher">Teacher</option>
                        <option value="admin">Admin</option>
                    </select>                                                                               
                {{/if}}
                <div class="table-responsive">                
                <table class='table'>
                    <thead>
                    <tr>
                        <th>&nbsp;</th>
                        <th>User Name</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Email</th>
                        <th>Roles</th>
                                                                       
                    </tr>
                    </thead>
                    
                    {{#EasySearch.Each index=usersIndex }}
                        <tr>
                            <td><input {{isUserChecked _id}} type="checkbox" name="user" class='school-directory-user-checkbox' value="{{_id}}"/></td>
                            <td><a href="{{pathFor 'admin.users.view' school=getCurrentSchoolName uid=getUserId}}"> {{username}} </a></td>
                            <td>{{profile.firstName}}</td>
                            <td>{{profile.lastName}}</td>
                            <td>{{getUserEmail}}</td>   
                            <td>{{getUserRoles}}</td>   
               
                        </tr>                    
                    {{/EasySearch.Each}}

                    {{#EasySearch.IfNoResults index=usersIndex}}
                        <div>No results found!</div>
                    {{/EasySearch.IfNoResults}}                        
                
                </table>
                </div>
                {{> EasySearch.Pagination index=usersIndex maxPages=10 customRenderPagination='CustomEasySearchPagination'}}               
            </div>
        {{else}}
            Loading...
        {{/if}}
    </div>
</template>

<template name='CustomEasySearchPagination'>
    <nav>
            <ul class="pagination">
                {{#each page}}
                    <li class="page {{pageClasses this}}">
                        <a>
                        {{content}}
                        </a>
                    </li>
                {{/each}}
            </ul>
    </nav>
</template>

<template name='SchoolUserListItem'>
    <tr>
        <td><input type="checkbox" name="user" value="{{_id}}"/></td>
        <td><a href="{{pathFor 'admin.users.view' school=getCurrentSchoolName uid=getUserId}}"> {{username}} </a></td>
        <td>{{profile.firstName}}</td>
        <td>{{profile.lastName}}</td>
        <td>{{getUserEmail}}</td>   
        <td>{{getUserRoles}}</td>   
        <td><button>Edit</button></td>         
        <td><button>Remove</button></td>                
    </tr>
</template>


<template name="SchoolUserList">
  <div class="table-responsive">
  <input type='search' placeholder="Type User Name or Email to filter"/>  <button>Remove</button> Total User : {{getTotalUserCount}}
  {{> pages}} 
  </div>
  {{> pagesNav}}

</template>